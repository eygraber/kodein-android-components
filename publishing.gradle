apply plugin: 'org.jetbrains.dokka'
apply plugin: 'com.vanniktech.maven.publish'

ext {
  RELEASE_REPOSITORY_URL = "https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/"
  SNAPSHOT_REPOSITORY_URL = "https://s01.oss.sonatype.org/content/repositories/snapshots/"
}

println("!!!!!!!!!!!!!!!!!!${findProperty("RELEASE_REPOSITORY_URL")}")
println("!!!!!!!!!!!!!!!!!!${findProperty("SNAPSHOT_REPOSITORY_URL")}")

mavenPublish {
  releaseSigningEnabled = !getGpgKey().isEmpty()

  nexus {
    baseUrl = 'https://s01.oss.sonatype.org/service/local/'
  }
}

def getGpgKey() {
  return findProperty("signingKey") ?: ""
}

signing {
  def signingKey = getGpgKey()
  if(!signingKey.isEmpty()) {
    useInMemoryPgpKeys(signingKey, "")
  }
}
